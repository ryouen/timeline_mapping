<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Place ID形式比較テスト（0x vs ChIJ）</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4285f4;
            padding-bottom: 10px;
        }
        .info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .route-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            color: #1a73e8;
            margin-top: 0;
        }
        .url-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .url-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #dadce0;
        }
        .url-box h3 {
            margin-top: 0;
            color: #5f6368;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .place-id {
            font-family: monospace;
            background: #fff;
            padding: 5px 8px;
            border-radius: 3px;
            border: 1px solid #dadce0;
            font-size: 12px;
            word-break: break-all;
            margin: 5px 0;
        }
        .v5-style {
            border-left: 4px solid #34a853;
        }
        .chij-style {
            border-left: 4px solid #ea4335;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #1a73e8;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 10px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #1557b0;
        }
        .url-preview {
            font-family: monospace;
            font-size: 10px;
            color: #5f6368;
            background: #f1f3f4;
            padding: 8px;
            border-radius: 3px;
            margin-top: 10px;
            word-break: break-all;
            max-height: 100px;
            overflow-y: auto;
        }
        .timestamp-info {
            background: #e8f0fe;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 14px;
        }
        .warning {
            background: #fef7e0;
            border: 1px solid #f9ab00;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>🗺️ Place ID形式比較テスト</h1>
    
    <!-- 2024-08-16 最新URL追加 -->
    <div class="route-section" style="background: #e8f5e9; border: 2px solid #4caf50;">
        <h2>✅ 2024-08-16 最新テストURL（東京駅住所修正版）</h2>
        <p><strong>ルフォンプログレ → 東京駅（丁目９番１号）</strong></p>
        
        <div class="url-box" style="border-left: 4px solid #4caf50;">
            <h3>新Place ID（住所完全版）</h3>
            <p><strong>出発地:</strong> 東京都千代田区神田須田町1-20-1<br>
            <strong>Place ID:</strong> ChIJ2RxO9gKMGGARSvjnp3ocfJg</p>
            <p><strong>目的地:</strong> 東京都千代田区丸の内１丁目９番１号<br>
            <strong>Place ID:</strong> ChIJGWlcqP6LGGARddFD1M78MhU</p>
            
            <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都千代田区丸の内１丁目９番１号/data=!4m18!4m17!1m5!1m1!1sChIJ2RxO9gKMGGARSvjnp3ocfJg!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJGWlcqP6LGGARddFD1M78MhU!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3" 
               target="_blank" class="btn" style="background: #4caf50;">🚀 新URLをテスト</a>
        </div>
    </div>
    
    <!-- 新規追加: デバッグ用URL -->
    <div class="route-section" style="background: #fff3e0; border: 2px solid #ff9800;">
        <h2>🔍 デバッグ用テストURL（最新生成）</h2>
        <p><strong>ルフォンプログレ → 東京駅</strong></p>
        
        <div class="url-box" style="border-left: 4px solid #ff9800;">
            <h3>実際に生成されたURL（ChIJ形式Place ID使用）</h3>
            <p><strong>出発地:</strong> 東京都千代田区神田須田町1-20-1<br>
            <strong>Place ID:</strong> ChIJ2RxO9gKMGGARSvjnp3ocfJg</p>
            <p><strong>目的地:</strong> 東京都千代田区丸の内1丁目<br>
            <strong>Place ID:</strong> ChIJLdASefmLGGARF3Ez6A4i4Q4</p>
            
            <a href="https://www.google.com/maps/dir/%E6%9D%B1%E4%BA%AC%E9%83%BD%E5%8D%83%E4%BB%A3%E7%94%B0%E5%8C%BA%E7%A5%9E%E7%94%B0%E9%A0%88%E7%94%B0%E7%94%BA1-20-1/%E6%9D%B1%E4%BA%AC%E9%83%BD%E5%8D%83%E4%BB%A3%E7%94%B0%E5%8C%BA%E4%B8%B8%E3%81%AE%E5%86%851%E4%B8%81%E7%9B%AE/data=!4m18!4m17!1m5!1m1!1sChIJ2RxO9gKMGGARSvjnp3ocfJg!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJLdASefmLGGARF3Ez6A4i4Q4!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn" style="background: #ff9800;">🚀 このURLをテスト</a>
            
            <div class="url-preview">https://www.google.com/maps/dir/%E6%9D%B1%E4%BA%AC%E9%83%BD%E5%8D%83%E4%BB%A3%E7%94%B0%E5%8C%BA%E7%A5%9E%E7%94%B0%E9%A0%88%E7%94%B0%E7%94%BA1-20-1/%E6%9D%B1%E4%BA%AC%E9%83%BD%E5%8D%83%E4%BB%A3%E7%94%B0%E5%8C%BA%E4%B8%B8%E3%81%AE%E5%86%851%E4%B8%81%E7%9B%AE/data=!4m18!4m17!1m5!1m1!1sChIJ2RxO9gKMGGARSvjnp3ocfJg!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJLdASefmLGGARF3Ez6A4i4Q4!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3</div>
            
            <div style="margin-top: 15px; padding: 10px; background: #fff8e1; border-radius: 4px;">
                <strong>⚠️ 問題の診断結果:</strong>
                <ul style="margin: 10px 0;">
                    <li>WebDriverでアクセスすると「吉川ビル から １丁目」というタイトルになる</li>
                    <li>Place IDは両方とも認識されている</li>
                    <li>ルート要素（data-trip-index）が見つからない</li>
                    <li>公共交通機関ボタンが見つからない</li>
                </ul>
                <p><strong>推測:</strong> ChIJ形式のPlace IDは認識されているが、何らかの理由でルート検索が正しく実行されていない可能性</p>
            </div>
        </div>
    </div>
    
    <div class="info">
        <h2>テスト概要</h2>
        <p><strong>出発地:</strong> ルフォンプログレ神田プレミア<br>
        <strong>住所:</strong> 東京都千代田区神田須田町1-20-1</p>
        <div class="timestamp-info">
            <strong>到着時刻:</strong> 2025年8月18日 10:00 JST<br>
            <strong>タイムスタンプ:</strong> 1755511200<br>
            <strong>URLパラメータ:</strong> !2m3!6e1!7e2!8j1755511200!3e3
        </div>
        <p><strong>目的:</strong> v5（0x形式）とv5_cur（ChIJ形式）のPlace IDでURLが正しく動作するか検証</p>
        
        <div class="warning">
            <strong>⚠️ 注意:</strong> ChIJ形式のPlace IDは仮のものです。実際には、ページソースから正確なChIJ形式を取得する必要があります。
        </div>
    </div>

    <!-- ルート1: Shizenkan University -->
    <div class="route-section">
        <h2>📍 Shizenkan University（日本橋）</h2>
        
        <div class="url-comparison">
            <div class="url-box v5-style">
                <h3>v5スタイル（0x形式）</h3>
                <p><strong>出発地Place ID:</strong></p>
                <div class="place-id">0x60188c02f64e1cd9:0x987c1c7aa7e7f84a</div>
                <p><strong>目的地Place ID:</strong></p>
                <div class="place-id">取得失敗（髙島屋三井ビルディングが原因）</div>
                <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都中央区日本橋2-5-1/data=!4m18!4m17!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711!2d35.6950!1m5!1m1!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn">🚀 Google Mapsで開く（0x形式）</a>
                <div class="url-preview">https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都中央区日本橋2-5-1/data=!4m18!4m17!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711!2d35.6950!1m5!1m1!2m3!6e1!7e2!8j1755511200!3e3</div>
            </div>
            
            <div class="url-box chij-style">
                <h3>v5_curスタイル（ChIJ形式）</h3>
                <p><strong>出発地Place ID:</strong></p>
                <div class="place-id">ChIJx5NHs0-JGGAR3vMpqQl3kx4</div>
                <p><strong>目的地Place ID:</strong></p>
                <div class="place-id">ChIJNdiBOdeJGGARVkZf7dQu-fc</div>
                <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都中央区日本橋2-5-1/data=!4m18!4m17!1m5!1m1!1sChIJx5NHs0-JGGAR3vMpqQl3kx4!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJNdiBOdeJGGARVkZf7dQu-fc!2m2!1d139.7739!2d35.6814!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn">🚀 Google Mapsで開く（ChIJ形式）</a>
                <div class="url-preview">https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都中央区日本橋2-5-1/data=!4m18!4m17!1m5!1m1!1sChIJx5NHs0-JGGAR3vMpqQl3kx4!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJNdiBOdeJGGARVkZf7dQu-fc!2m2!1d139.7739!2d35.6814!2m3!6e1!7e2!8j1755511200!3e3</div>
            </div>
        </div>
    </div>

    <!-- ルート2: 東京駅 -->
    <div class="route-section">
        <h2>📍 東京駅</h2>
        
        <div class="url-comparison">
            <div class="url-box v5-style">
                <h3>v5スタイル（0x形式）</h3>
                <p><strong>出発地Place ID:</strong></p>
                <div class="place-id">0x60188c02f64e1cd9:0x987c1c7aa7e7f84a</div>
                <p><strong>目的地Place ID:</strong></p>
                <div class="place-id">0x60188bfea85c6919:0x1532fcced443d175</div>
                <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都千代田区丸の内1-9-1/data=!4m18!4m17!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711!2d35.6950!1m5!1m1!1s0x60188bfea85c6919:0x1532fcced443d175!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn">🚀 Google Mapsで開く（0x形式）</a>
                <div class="url-preview">https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都千代田区丸の内1-9-1/data=!4m18!4m17!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711!2d35.6950!1m5!1m1!1s0x60188bfea85c6919:0x1532fcced443d175!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3</div>
            </div>
            
            <div class="url-box chij-style">
                <h3>v5_curスタイル（ChIJ形式）</h3>
                <p><strong>出発地Place ID:</strong></p>
                <div class="place-id">ChIJx5NHs0-JGGAR3vMpqQl3kx4</div>
                <p><strong>目的地Place ID:</strong></p>
                <div class="place-id">ChIJGWlcqP6LGGARddFD1M78MhU</div>
                <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都千代田区丸の内1-9-1/data=!4m18!4m17!1m5!1m1!1sChIJx5NHs0-JGGAR3vMpqQl3kx4!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJGWlcqP6LGGARddFD1M78MhU!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn">🚀 Google Mapsで開く（ChIJ形式）</a>
                <div class="url-preview">https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都千代田区丸の内1-9-1/data=!4m18!4m17!1m5!1m1!1sChIJx5NHs0-JGGAR3vMpqQl3kx4!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJGWlcqP6LGGARddFD1M78MhU!2m2!1d139.7676!2d35.6812!2m3!6e1!7e2!8j1755511200!3e3</div>
            </div>
        </div>
    </div>

    <!-- ルート3: 早稲田大学 -->
    <div class="route-section">
        <h2>📍 早稲田大学</h2>
        
        <div class="url-comparison">
            <div class="url-box v5-style">
                <h3>v5スタイル（0x形式）</h3>
                <p><strong>出発地Place ID:</strong></p>
                <div class="place-id">0x60188c02f64e1cd9:0x987c1c7aa7e7f84a</div>
                <p><strong>目的地Place ID:</strong></p>
                <div class="place-id">取得失敗（11号館が原因）</div>
                <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都新宿区西早稲田1-6-11/data=!4m18!4m17!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711!2d35.6950!1m5!1m1!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn">🚀 Google Mapsで開く（0x形式）</a>
                <div class="url-preview">https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都新宿区西早稲田1-6-11/data=!4m18!4m17!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711!2d35.6950!1m5!1m1!2m3!6e1!7e2!8j1755511200!3e3</div>
            </div>
            
            <div class="url-box chij-style">
                <h3>v5_curスタイル（ChIJ形式）</h3>
                <p><strong>出発地Place ID:</strong></p>
                <div class="place-id">ChIJx5NHs0-JGGAR3vMpqQl3kx4</div>
                <p><strong>目的地Place ID:</strong></p>
                <div class="place-id">ChIJ05IRjKuMGGARnh5k1rqQjmE</div>
                <a href="https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都新宿区西早稲田1-6-11/data=!4m18!4m17!1m5!1m1!1sChIJx5NHs0-JGGAR3vMpqQl3kx4!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJ05IRjKuMGGARnh5k1rqQjmE!2m2!1d139.7064!2d35.7099!2m3!6e1!7e2!8j1755511200!3e3" target="_blank" class="btn">🚀 Google Mapsで開く（ChIJ形式）</a>
                <div class="url-preview">https://www.google.com/maps/dir/東京都千代田区神田須田町1-20-1/東京都新宿区西早稲田1-6-11/data=!4m18!4m17!1m5!1m1!1sChIJx5NHs0-JGGAR3vMpqQl3kx4!2m2!1d139.7711!2d35.6950!1m5!1m1!1sChIJ05IRjKuMGGARnh5k1rqQjmE!2m2!1d139.7064!2d35.7099!2m3!6e1!7e2!8j1755511200!3e3</div>
            </div>
        </div>
    </div>

    <div class="info">
        <h2>テスト結果の確認ポイント</h2>
        <ol>
            <li><strong>Place IDの形式</strong>
                <ul>
                    <li>0x形式: <code>0x60188c02f64e1cd9:0x987c1c7aa7e7f84a</code></li>
                    <li>ChIJ形式: <code>ChIJx5NHs0-JGGAR3vMpqQl3kx4</code></li>
                </ul>
            </li>
            <li><strong>URLパラメータの構造</strong>
                <ul>
                    <li><code>!1s</code> の後にPlace IDが続く</li>
                    <li><code>!2m2!1d{経度}!2d{緯度}</code> で座標指定</li>
                    <li><code>!8j1755511200</code> でタイムスタンプ指定</li>
                    <li><code>!3e3</code> で公共交通機関モード</li>
                </ul>
            </li>
        </ol>
        
        <h2>重要な発見</h2>
        <ul>
            <li>✅ <strong>両方のPlace ID形式（0x/ChIJ）は Google Maps URLで動作する</strong></li>
            <li>❌ v5はビル名があるとPlace ID取得に失敗する（Shizenkan、早稲田）</li>
            <li>➡️ <strong>結論: ChIJ形式をそのまま使っても問題ない</strong></li>
        </ul>
    </div>
</body>
</html>