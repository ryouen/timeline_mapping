# Google Maps Place ID 取得のベストプラクティス

## 作成日
2025年8月15日

## 重要な原則

### ❌ 避けるべき方法
- **施設名での検索** - 同名の別施設を取得する可能性が高い
  - 例：「東京アメリカンクラブ」→ 麻布台の本店が検索される（日本橋店ではない）

### ✅ 推奨される方法
- **正確な住所での検索** - 一意の場所を特定できる
  - 例：「東京都中央区日本橋室町３丁目２−１」→ 正しい場所のPlace IDを取得

## 実例：東京アメリカンクラブの問題

### 問題の内容
- JSONファイル上の住所：`東京都中央区日本橋室町３丁目２−１`（日本橋）
- 施設名で検索した結果：`東京都港区麻布台2-1-2`（麻布台の本店）
- **全く異なる場所を取得してしまった**

### 解決方法
```python
# ❌ 悪い例
search_query = "東京アメリカンクラブ"

# ✅ 良い例
search_query = "東京都中央区日本橋室町３丁目２−１"
```

## スクレイパー実装への影響

### 1. Place ID取得ロジックの修正
```python
def get_place_info(location_name, address=None):
    """
    場所情報を取得
    
    Args:
        location_name: 施設名
        address: 住所（こちらを優先的に使用）
    """
    # 住所が提供されている場合は住所を使用
    search_query = address if address else location_name
    
    # Google Maps APIまたはスクレイピングで検索
    # ...
```

### 2. データ構造の確認
destinations.jsonとproperties.jsonのaddressフィールドを常に優先的に使用する。

### 3. 検証プロセス
1. Place ID取得後、取得した場所の住所を確認
2. 元の住所と一致するか検証
3. 不一致の場合は警告を出力

## チェックリスト

Place ID取得時の確認事項：
- [ ] 住所フィールドが存在するか確認
- [ ] 住所での検索を優先
- [ ] 施設名は補助的な情報として使用
- [ ] 取得後の住所検証を実施
- [ ] 郵便番号を含む完全な住所形式を使用

## 影響を受けるデータ

現在のdestinations.jsonで要確認の施設：
1. 東京アメリカンクラブ - 日本橋室町（麻布台と混同しやすい）
2. その他の支店・分館がある施設

## まとめ
Place IDの取得は、スクレイピングの精度に直結する重要な要素。施設名ではなく、**必ず住所を使用**して検索することで、正確な場所を特定できる。