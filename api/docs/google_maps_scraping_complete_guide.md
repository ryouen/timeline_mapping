# Google Maps ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Œå…¨ã‚¬ã‚¤ãƒ‰

## ä½œæˆæ—¥
2025å¹´8æœˆ15æ—¥

## ğŸ¯ é‡è¦ãªç™ºè¦‹ã¨è§£æ±ºç­–

### 1. Place IDã®å¿…é ˆæ€§
**å•é¡Œ**: ä½æ‰€ã ã‘ã®URLã§ã¯æ™‚åˆ»æŒ‡å®šã‚„ãƒ¢ãƒ¼ãƒ‰æŒ‡å®šãŒä¸å®‰å®š
**è§£æ±º**: Place IDã‚’å«ã‚€å®Œå…¨ãªURLæ§‹é€ ãŒå¿…è¦

### 2. ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®ç‰¹æ®Šä»•æ§˜
**å•é¡Œ**: JSTã¨UTCã®å¤‰æ›ã§æ··ä¹±
**è§£æ±º**: Google Mapsã¯JSTã®æ™‚åˆ»ã‚’UTCåŸºæº–ã§è¨ˆç®—ï¼ˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ç„¡è¦–ï¼‰

```python
# ä¾‹ï¼š2025å¹´8æœˆ16æ—¥ 10:00 JSTåˆ°ç€
# é€šå¸¸ã®è¨ˆç®—: 2025-08-16 01:00 UTC = 1755306000
# Google Maps: 2025-08-16 10:00 UTC = 1755338400 â† ã“ã‚Œã‚’ä½¿ç”¨ï¼
```

### 3. ä½æ‰€ã§ã®æ¤œç´¢ã®é‡è¦æ€§
**å•é¡Œ**: æ–½è¨­åã§ã®æ¤œç´¢ã¯åˆ¥ã®å ´æ‰€ã‚’å–å¾—ã™ã‚‹å¯èƒ½æ€§
**è§£æ±º**: æ­£ç¢ºãªä½æ‰€ã§Place IDã‚’å–å¾—

## ğŸ“ æ­£ã—ã„URLæ§‹é€ 

### å®Œå…¨ãªURLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```
https://www.google.com/maps/dir/
[å‡ºç™ºåœ°ï¼ˆéƒµä¾¿ç•ªå·+ä½æ‰€+å»ºç‰©åï¼‰]/
[ç›®çš„åœ°ï¼ˆéƒµä¾¿ç•ªå·+ä½æ‰€+æ–½è¨­åï¼‰]/
@[ä¸­å¿ƒåº§æ¨™],16z/
data=!3m1!4b1              # ãƒ¢ãƒ¼ãƒ‰æŒ‡å®šï¼ˆé‡è¦ï¼‰
!4m18!4m17                  # ãƒ«ãƒ¼ãƒˆæƒ…å ±
!1m5!1m1!1s[å‡ºç™ºåœ°Place ID]!2m2!1d[çµŒåº¦]!2d[ç·¯åº¦]
!1m5!1m1!1s[ç›®çš„åœ°Place ID]!2m2!1d[çµŒåº¦]!2d[ç·¯åº¦]
!2m3!6e1!7e2!8j[timestamp]  # æ™‚åˆ»æŒ‡å®š
!3e3                        # å…¬å…±äº¤é€šæ©Ÿé–¢ãƒ¢ãƒ¼ãƒ‰
```

### å®Ÿä¾‹ï¼ˆæ¤œè¨¼æ¸ˆã¿ï¼‰
```
https://www.google.com/maps/dir/
ã€’101-0041+æ±äº¬éƒ½åƒä»£ç”°åŒºç¥ç”°é ˆç”°ç”ºï¼‘ä¸ç›®ï¼’ï¼âˆ’ï¼‘+å‰å·ãƒ“ãƒ«/
ã€’103-6199+æ±äº¬éƒ½ä¸­å¤®åŒºæ—¥æœ¬æ©‹ï¼’ä¸ç›®ï¼•âˆ’ï¼‘/
@35.6880527,139.7674084,16z/
data=!4m18!4m17
!1m5!1m1!1s0x60188c02f64e1cd9:0x987c1c7aa7e7f84a!2m2!1d139.7711379!2d35.6949994
!1m5!1m1!1s0x601889d738b39701:0x996fd0bd4cfffd56!2m2!1d139.773935!2d35.6814238
!2m3!6e1!7e2!8j1755338400!3e3
```
çµæœ: 9:48å‡ºç™º â†’ 9:56åˆ°ç€ï¼ˆéŠ€åº§ç·šã€8åˆ†ã€180å††ï¼‰

## ğŸ”§ å®Ÿè£…æ–¹æ³•

### 1. Place IDå–å¾—
```python
def get_place_id(driver, address):
    """ä½æ‰€ã‹ã‚‰Place IDã‚’å–å¾—"""
    origin = "æ±äº¬éƒ½åƒä»£ç”°åŒºç¥ç”°é ˆç”°ç”º1-20-1"
    url = f"https://www.google.com/maps/dir/{quote(origin)}/{quote(address)}/data=!3e3"
    
    driver.get(url)
    time.sleep(5)
    
    # URLã‹ã‚‰2ç•ªç›®ã®Place IDã‚’æŠ½å‡ºï¼ˆ1ç•ªç›®ã¯å‡ºç™ºåœ°ï¼‰
    place_id_matches = re.findall(r'!1s(0x[0-9a-f]+:0x[0-9a-f]+)', driver.current_url)
    
    if len(place_id_matches) >= 2:
        return place_id_matches[1]  # ç›®çš„åœ°ã®Place ID
    return None
```

### 2. ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç”Ÿæˆ
```python
def generate_google_maps_timestamp(year, month, day, hour, minute):
    """
    Google Mapsç”¨ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ç”Ÿæˆ
    é‡è¦: JSTã®æ™‚åˆ»ã‚’UTCåŸºæº–ã§è¨ˆç®—ï¼ˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ç„¡è¦–ï¼‰
    """
    from datetime import datetime
    import pytz
    
    # UTCæ™‚åˆ»ã¨ã—ã¦ä½œæˆï¼ˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ç„¡è¦–ï¼‰
    utc_time = datetime(year, month, day, hour, minute, 0, tzinfo=pytz.UTC)
    return int(utc_time.timestamp())

# ä¾‹: 2025å¹´8æœˆ16æ—¥ 10:00 JSTåˆ°ç€
timestamp = generate_google_maps_timestamp(2025, 8, 16, 10, 0)
# â†’ 1755338400
```

### 3. å®Œå…¨ãªURLæ§‹ç¯‰
```python
def build_complete_url(origin_info, dest_info, arrival_time):
    """Place IDã‚’å«ã‚€å®Œå…¨ãªGoogle Maps URLã‚’æ§‹ç¯‰"""
    
    # éƒµä¾¿ç•ªå·ä»˜ãä½æ‰€
    origin_str = f"ã€’{origin_info['postal_code']}+{quote(origin_info['address'])}"
    dest_str = f"ã€’{dest_info['postal_code']}+{quote(dest_info['address'])}"
    
    # ä¸­å¿ƒåº§æ¨™
    center_lat = (float(origin_info['lat']) + float(dest_info['lat'])) / 2
    center_lon = (float(origin_info['lon']) + float(dest_info['lon'])) / 2
    
    # URLæ§‹ç¯‰
    url = f"https://www.google.com/maps/dir/{origin_str}/{dest_str}/"
    url += f"@{center_lat},{center_lon},16z/"
    
    # dataãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    data_parts = [
        "!3m1!4b1",  # ãƒ¢ãƒ¼ãƒ‰æŒ‡å®šï¼ˆé‡è¦ï¼‰
        "!4m18!4m17",
        f"!1m5!1m1!1s{origin_info['place_id']}!2m2!1d{origin_info['lon']}!2d{origin_info['lat']}",
        f"!1m5!1m1!1s{dest_info['place_id']}!2m2!1d{dest_info['lon']}!2d{dest_info['lat']}",
        f"!2m3!6e1!7e2!8j{timestamp}",  # æ™‚åˆ»æŒ‡å®š
        "!3e3"  # å…¬å…±äº¤é€šæ©Ÿé–¢
    ]
    
    url += "data=" + "".join(data_parts)
    return url
```

## ğŸ“Š å–å¾—æ¸ˆã¿Place IDä¸€è¦§

| ç›®çš„åœ° | Place ID | ä½æ‰€ |
|--------|----------|------|
| Shizenkan | 0x601889d738b39701:0x996fd0bd4cfffd56 | æ±äº¬éƒ½ä¸­å¤®åŒºæ—¥æœ¬æ©‹ï¼’ä¸ç›®ï¼•âˆ’ï¼‘ |
| æ±äº¬ã‚¢ãƒ¡ãƒªã‚«ãƒ³ã‚¯ãƒ©ãƒ– | 0x60188bffe47b594f:0xf5b2351645635f1e | æ±äº¬éƒ½ä¸­å¤®åŒºæ—¥æœ¬æ©‹å®¤ç”ºï¼“ä¸ç›®ï¼’âˆ’ï¼‘ |
| axleå¾¡èŒ¶ãƒæ°´ | 0x60188c1a868823d9:0x2a3ffeb1adb0d843 | æ±äº¬éƒ½åƒä»£ç”°åŒºç¥ç”°å°å·ç”ºï¼“ä¸ç›®ï¼’ï¼˜âˆ’ï¼• |
| Yawara | 0x60188ca49985cf27:0x84d5e5011192e5f0 | æ±äº¬éƒ½æ¸‹è°·åŒºç¥å®®å‰ï¼‘ä¸ç›®ï¼˜âˆ’ï¼‘ï¼ |
| ç¥è°·ç”º(EE) | 0x60188b96cc9f5a69:0xd4e1c1848935ef8e | æ±äº¬éƒ½æ¸¯åŒºè™ãƒé–€ï¼”ä¸ç›®ï¼’âˆ’ï¼– |
| æ—©ç¨²ç”°å¤§å­¦ | 0x60188d1b65b68f05:0x548ad5986c6f7ee1 | æ±äº¬éƒ½æ–°å®¿åŒºè¥¿æ—©ç¨²ç”°ï¼‘ä¸ç›®ï¼–âˆ’ï¼‘ |
| åºœä¸­ã‚ªãƒ•ã‚£ã‚¹ | 0x6018e499970c7047:0xdb690c7138c3ab0a | æ±äº¬éƒ½åºœä¸­å¸‚ä½å‰ç”ºï¼•ä¸ç›®ï¼’ï¼’âˆ’ï¼• |
| æ±äº¬é§… | 0x60188bf97912d02d:0xee1220ee8337117 | æ±äº¬éƒ½åƒä»£ç”°åŒºä¸¸ã®å†…ï¼‘ä¸ç›® |
| ç¾½ç”°ç©ºæ¸¯ | 0x601863eeef4a0561:0x3c6803c1bc151e2 | æ±äº¬éƒ½å¤§ç”°åŒºç¾½ç”°ç©ºæ¸¯3-3-2 |

## âš ï¸ é‡è¦ãªæ³¨æ„ç‚¹

1. **Place IDã¯å¿…é ˆ** - ä½æ‰€ã ã‘ã§ã¯ä¸ååˆ†
2. **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯UTCåŸºæº–** - JSTã®æ™‚åˆ»å€¤ã‚’ãã®ã¾ã¾ä½¿ç”¨
3. **ä½æ‰€ã§ã®æ¤œç´¢** - æ–½è¨­åã¯é¿ã‘ã‚‹
4. **!3m1!4b1ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿** - ãƒ¢ãƒ¼ãƒ‰æŒ‡å®šã®å®‰å®šåŒ–ã«é‡è¦
5. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®é †åº** - Place ID â†’ åº§æ¨™ â†’ æ™‚åˆ» â†’ !3e3

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. v4ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼ã®å®Ÿè£…
   - Place IDå–å¾—ãƒ­ã‚¸ãƒƒã‚¯
   - æ­£ã—ã„URLæ§‹ç¯‰
   - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç”Ÿæˆã®ä¿®æ­£

2. ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼
   - å…¨9ãƒ«ãƒ¼ãƒˆã§ã®å‹•ä½œç¢ºèª
   - æ™‚åˆ»æŒ‡å®šã®ç¢ºèª
   - å…¬å…±äº¤é€šæ©Ÿé–¢ãƒ¢ãƒ¼ãƒ‰ã®ç¢ºèª

## ã¾ã¨ã‚

Google Mapsã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã®æˆåŠŸã«ã¯ï¼š
- **Place IDã®å–å¾—**ãŒæœ€é‡è¦
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®ç‰¹æ®Šä»•æ§˜**ã‚’ç†è§£
- **æ­£ç¢ºãªä½æ‰€**ã§ã®æ¤œç´¢
- **å®Œå…¨ãªURLæ§‹é€ **ã®æ§‹ç¯‰

ã“ã‚Œã‚‰ã®è¦ç´ ã‚’æ­£ã—ãå®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼ãŒä½œæˆã§ãã‚‹ã€‚